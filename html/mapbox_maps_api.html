<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css' rel='stylesheet' />
    <title>Mapz!!</title>
    <style>
        body {
            background-color: #a3dbe1;
        }

        #map {
            /* the width and height may be set to any size */
            width: 75%;
            height: 500px;
            margin: 25px auto;
        }

        h1 {
            text-align: center;
        }
    </style>
</head>
<body>
    <div>
        <h1>My 1st map!!</h1>

<!--        Container that holds the map...-->

        <div id='map' style='width: 100%; height: 700px;'></div>
    </div>

<!--    mapbox JS-->
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js'></script>

<!--    mapbox geocoder-->
<script src="../js/mapbox-geocoder-utils.js"></script>

<!--    myJS-->
<script>
// added my token to a variable for ease of typing
    const mapboxToken = 'pk.eyJ1IjoiY2hhcmxlc3cxMTYiLCJhIjoiY2t5dW5oYm8yMGc4djJ2cGl4eGJvdHBmOSJ9.HOyJMqOoXCHENkAzhN0iCw';

    mapboxgl.accessToken = mapboxToken;
    let map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v9',
        center: [-98.4916, 29.4252],
        zoom: 10
    });

    let restaurants = [
        {
                address: "4834 Whirlwind Dr, San Antonio, TX 78217",
                popupHTML: "<p>Ranger Creek Brewing & Distillation</p>",
                web: "<a href='https://drinkrangercreek.com'>drinkrangercreek.com</a>",
        },
        {
            address: "210 E Aviation Blvd, Universal City, TX 78148",
            popupHTML: "<p>Gather Brewing Co.</p>",
            web: "<a href='https://gatherbrewing.co'>gatherbrewing.co</a>",
        },
        {
            address: "122 East Houston St, San Antonio, TX, 78205",
            popupHTML: "<p>Bunz Handcrafted Burgers</p>",
            web: "<a href='https://www.tastybunz.com'>www.tastybunz.com</a>",
        }
    ]

restaurants.forEach(function (restaurant){
    placeMarkerAndPopup(restaurant, mapboxToken, map)
})

function placeMarkerAndPopup(info, token, map){
        geocode(info.address, token).then(function (coordinates) {
            let popup = new mapboxgl.Popup()
                .setHTML(info.popupHTML + info.web);
            let marker = new mapboxgl.Marker()
                .setLngLat(coordinates)
                .addTo(map)
                .setPopup(popup)
        })
}








</script>
</body>
</html>